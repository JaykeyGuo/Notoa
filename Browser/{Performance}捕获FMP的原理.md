# {Performance}捕获FMP的原理

> FMP：First Meaningful Paint，首次有效绘制
>
> FMP常用于页面性能的衡量，主要是对页面首次渲染的时候，如何去判断页面是否完成有意义的渲染的过程。

  在浏览器的渲染过程中，随着对HTML的边解析和边加载，逐步将布局对象添加到布局树上的过程。伴随而来的还有另外一个概念：FCP

> FCP：First Contentful Paint，首次内容绘制

FCP是指首次有布局对象条件到布局树的时间点。

与FCP不同的是FMP是在有大量的布局对象被添加到布局树是才被捕获的，相较于FCP，FMP时页面渲染的内容更多、也更有意义（例如文字和图片等），FCP时可能是指渲染了页面的一部分，对用户来说没有太多的信息和内容。

#### 如何确定“大量布局对象”

这里有一个计算FMP的公式：

> 意义值 = 当前时间布局对象的数量 / max （max最大为1，max = 页面高度 / 屏幕高度）
>
> FMP = 意义值最大的一次布局变动之后的那次绘制



#### 小结

FMP是一个检测页面性能的指标，主要是对页面性能的一个体现，我们可以通过FMP更好的了解到浏览器渲染的布置。

PS：从FMP和FCP的命名来看，我们也能知道其中的一些差别，FCP更多的是体现“有内容”，FMP侧重的是“内容是有意义的”。



---

Link：

[捕获FMP的原理](https://github.com/berwin/Blog/issues/42)